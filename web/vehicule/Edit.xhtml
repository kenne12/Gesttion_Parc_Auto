<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <ui:composition>

        <p:dialog  id="VehiculeEditDlg" widgetVar="VehiculeEditDialog" modal="true" resizable="false" appendTo="@(body)" header="#{msg.EditVehiculeTitle}">
            <h:form id="VehiculeEditForm" enctype="multipart/form-data">
                <h:panelGrid columns="2"  rendered="#{vehiculeController.selectedVehicule != null}" style=" position: relative;  text-align:left; font-weight: bold; font-style: oblique;">
                    <h:panelGroup id="display">
                        <p:panelGrid columns="2">
                            <p:outputLabel value="#{msg.EditVehiculeLabel_immatriculation}" for="immatriculation" />
                            <p:inputText id="immatriculation" value="#{vehiculeController.selectedVehicule.immatriculation}" 
                                         title="#{msg.EditVehiculeTitle_immatriculation}" style="font-weight: bold; font-style: oblique; width: 50%"/>
                            
                            <p:outputLabel value="#{msg.EditVehiculeLabel_numchassis}" for="numchassis" />
                            <p:inputText id="numchassis" value="#{vehiculeController.selectedVehicule.numchassis}" 
                                         title="#{msg.EditVehiculeTitle_numchassis}" style="font-weight: bold; font-style: oblique; width: 50%"/>
                            
                            <p:outputLabel value="#{msg.EditVehiculeLabel_cartegrise}" for="cartegrise" />
                            <p:inputText id="cartegrise" value="#{vehiculeController.selectedVehicule.cartegrise}" 
                                         title="#{msg.EditVehiculeTitle_cartegrise}" style="font-weight: bold; font-style: oblique; width: 50%"/>
                            
                            <p:outputLabel value="#{msg.EditVehiculeLabel_numserie}" for="numserie" />
                            <p:inputText id="numserie" value="#{vehiculeController.selectedVehicule.numserie}" 
                                         title="#{msg.EditVehiculeTitle_numserie}" style="font-weight: bold; font-style: oblique; width: 50%"/>
                            
                            <p:outputLabel value="#{msg.EditVehiculeLabel_puissance}" for="puissance" />
                            <p:inputText id="puissance" value="#{vehiculeController.selectedVehicule.puissance}" 
                                         title="#{msg.EditVehiculeTitle_puissance}" style="font-weight: bold; font-style: oblique; width: 50%"/>
                            
                            <p:outputLabel value="Durée de Vie" for="duree" />
                            <p:inputText id="duree" value="#{vehiculeController.selectedVehicule.dureevie}" 
                                         title="Durée de vie" style="font-weight: bold; font-style: oblique; width: 50%"/> 
                           
                            
                            <p:outputLabel value="#{msg.EditVehiculeLabel_coutachatttc}" for="coutachatttc" />
                            <p:inputText id="coutachatttc" value="#{vehiculeController.selectedVehicule.coutachatttc}" 
                                         title="#{msg.EditVehiculeTitle_coutachatttc}" style="font-weight: bold; font-style: oblique; width: 50%"/>
                            
                            <p:outputLabel value="#{msg.EditVehiculeLabel_dateacquisition}" for="dateacquisition" />
                            <p:calendar id="dateacquisition" pattern="dd/MM/yyyy" value="#{vehiculeController.selectedVehicule.dateacquisition}" 
                                        title="#{msg.EditVehiculeTitle_dateacquisition}" size="5" placeholder="dd/mm/yyyy" navigator="true" effect="fold" styleClass="custom"/>
                            
                            <p:outputLabel value="#{msg.CreateVehiculeTitle_etat}" for="etat" />
                            <p:selectOneMenu id="etat" value="#{vehiculeController.selectedVehicule.etat}" 
                                             required="true" requiredMessage="Etat du véhicule non selectionné" style="font-weight: bold; font-style: oblique; width: 85%">
                                <f:selectItem itemLabel="#{msg.Faire_choix}" itemValue=""/>
                                <f:selectItem itemLabel="#{msg.Etat_reforme}" itemValue="#{msg.Etat_reforme}"/>
                                <f:selectItem itemLabel="#{msg.Etat_fonctionnel}" itemValue="#{msg.Etat_fonctionnel}"/>
                                <f:selectItem itemLabel="#{msg.Etat_en_arret}" itemValue="#{msg.Etat_en_arret}"/>
                            </p:selectOneMenu> 
                           
                            <p:outputLabel value="#{msg.EditVehiculeLabel_nbredeplace}" for="nbredeplace" />
                            <p:inputText id="nbredeplace" value="#{vehiculeController.selectedVehicule.nbredeplace}" 
                                         title="#{msg.EditVehiculeTitle_nbredeplace}" style="font-weight: bold; font-style: oblique; width: 50%"/>
                            
                            <p:outputLabel value="#{msg.EditVehiculeLabel_nbresinistre}" for="nbresinistre" />
                            <p:inputText id="nbresinistre" value="#{vehiculeController.selectedVehicule.nbresinistre}" 
                                         title="#{msg.EditVehiculeTitle_nbresinistre}" style="font-weight: bold; font-style: oblique; width: 50%"/>
                            
                            <p:outputLabel value="#{msg.EditVehiculeLabel_nbrereparation}" for="nbrereparation" />
                            <p:inputText id="nbrereparation" value="#{vehiculeController.selectedVehicule.nbrereparation}" 
                                         title="#{msg.EditVehiculeTitle_nbrereparation}" style="font-weight: bold; font-style: oblique; width: 50%"/>
                            
                            <p:outputLabel value="#{msg.EditVehiculeLabel_nbrerevision}" for="nbrerevision" />
                            <p:inputText id="nbrerevision" value="#{vehiculeController.selectedVehicule.nbrerevision}" 
                                         title="#{msg.EditVehiculeTitle_nbrerevision}" style="font-weight: bold; font-style: oblique; width: 50%"/>
                            
                            
                            
                            <p:outputLabel value="#{msg.CreateVehiculeLabel_idMarque}" for="idMarque" />
                            <p:selectOneMenu id="idMarque" value="#{vehiculeController.marque}" converter="marqueConverter" required="true" 
                                             requiredMessage="Marque non selectionnée" style="font-weight: bold; font-style: oblique; width: 85%">
                                
                                <f:selectItems value="#{vehiculeController.listMarque}" 
                                               var="mq" 
                                               itemLabel="#{mq.nom}" 
                                               itemValue="#{mq}"/>
                                <p:ajax  listener="#{vehiculeController.filtreModele()}" update="idModele" />
                            </p:selectOneMenu>
                            
                            <p:outputLabel value="#{msg.CreateVehiculeLabel_idModele}" for="idModele" />
                            <p:selectOneMenu id="idModele" value="#{vehiculeController.modele}" converter="modeleConverter" required="true" 
                                             requiredMessage="Modèle non selectionné"  style="font-weight: bold; font-style: oblique; width: 85%">
                                
                                <f:selectItems value="#{vehiculeController.listModele}"
                                               var="m"
                                               itemLabel="#{m.nom}"
                                               itemValue="#{m}"/>
                            </p:selectOneMenu> 
                                                      
                            <p:outputLabel value="#{msg.EditVehiculeLabel_idSourceenergie}" for="idSourceenergie" />
                            <p:selectOneMenu id="idSourceenergie" value="#{vehiculeController.sourceenergie}" converter="sourceenergieConverter" style="font-weight: bold; font-style: oblique; width: 85%">
                                <f:selectItems value="#{vehiculeController.listSourceenergie}"
                                               var="se"
                                               itemLabel="#{se.nom}"
                                               itemValue="#{se}"/>
                            </p:selectOneMenu>
                        </p:panelGrid>
                    </h:panelGroup>
                    <h:panelGroup id="display1">
                        <p:panelGrid columns="2">
                            <p:outputLabel value="#{msg.EditVehiculeLabel_idCategorievehicule}" for="idCategorievehicule" />
                            <p:selectOneMenu id="idCategorievehicule" value="#{vehiculeController.categorievehicule}" converter="categorievehiculeConverter" style="font-weight: bold; font-style: oblique; width: 100%;">
                                <f:selectItems value="#{vehiculeController.listCategorievehicule}"
                                               var="cat"
                                               itemLabel="#{cat.nom}"
                                               itemValue="#{cat}"/>
                            </p:selectOneMenu> 
                            <p:outputLabel value="#{msg.EditVehiculeLabel_idSourcefinancement}" for="idSourcefinancement" />
                            <p:selectOneMenu id="idSourcefinancement" 
                                             value="#{vehiculeController.sourcefinancement}" converter="sourcefinancementConverter" style="font-weight: bold; font-style: oblique; width: 100%;">
                                <f:selectItems value="#{vehiculeController.listSourcefinancement}"
                                               var="sf"
                                               itemLabel="#{sf.nom}"
                                               itemValue="#{sf}"/>
                            </p:selectOneMenu>
                            <p:outputLabel value="#{msg.EditVehiculeLabel_idModeacquisition}" for="idModeacquisition" />
                            <p:selectOneMenu id="idModeacquisition" value="#{vehiculeController.modeacquisition}" converter="modeacquisitionConverter" style="font-weight: bold; font-style: oblique; width: 100%;">
                                <f:selectItems value="#{vehiculeController.listModeacquisition}"
                                               var="ma"
                                               itemLabel="#{ma.nom}"
                                               itemValue="#{ma}"/>
                            </p:selectOneMenu>
                            <p:outputLabel value="#{msg.EditVehiculeLabel_description}" for="description" />
                            <p:inputTextarea id="description" value="#{vehiculeController.selectedVehicule.description}" 
                                             title="#{msg.EditVehiculeTitle_description}" cols="25"
                                             style="font-weight: bold; font-style: oblique; width: 95%" />
                        </p:panelGrid>
                        <h:panelGrid columns="1" style="font-weight: bold; font-style: oblique; width: 100%"> 
                            <p:fileUpload id="photo" fileUploadListener="#{vehiculeController.handleFileUpload}"  
                                          label="#{msg.Inserer_photo}"
                                          uploadLabel="Télécharger"
                                          cancelLabel="Annuler"
                                          mode="advanced"   
                                          update="affi_photo"  
                                          sizeLimit="10000000"   
                                          allowTypes="/(\.|\/)(gif|jpe?g|png)$/"
                                          auto="true"
                                          style="text-align:left; font-weight: bold; font-style: oblique;"
                                          />
                        </h:panelGrid> 
                        <p:graphicImage id="affi_photo" value="/resources/images/#{vehiculeController.photo}"  
                                        height="270" width="400"
                                        style="border-radius: 10px 10px 10px 10px; border: 5px;font-weight: bold; font-style: oblique;"
                                        />
                    </h:panelGroup>
                </h:panelGrid>
                <p:commandButton ajax="false" style="float: right;" icon="ui-icon-check" value="#{msg.Valider}"  actionListener="#{vehiculeController.editVehicule()}" update="display" oncomplete="handleSubmit(args, 'VehiculeEditDialog');"/>
                <p:commandButton ajax="false" style="float: right; color: red;" icon="ui-icon-close" value="#{msg.Cancel}" onclick="VehiculeEditDialog.hide()"/>
            </h:form>
        </p:dialog>

    </ui:composition>
</html>
